{"cells":[{"kind":1,"language":"markdown","value":"Analysis XML source"},{"kind":2,"language":"xquery","value":"(:<:)\r\ndeclare namespace functx = \"http://www.functx.com\";\r\ndeclare namespace fos = \"http://www.w3.org/xpath-functions/spec/namespace\";\r\n\r\ndeclare variable $SRC:= \"C:\\Users\\mrwhe\\git\\quodatum\\xq-catalogs\\packages.src\\xpath-4.0\\function-catalog.xml\";\r\ndeclare variable $SRC2:=\"https://raw.githubusercontent.com/qt4cg/qtspecs/refs/heads/master/specifications/xpath-functions-40/src/function-catalog.xml\";\r\ndeclare variable $DOC:=fetch:doc($SRC2);\r\n\r\ndeclare function functx:namespaces-in-use( $root as node()? )\r\nas xs:anyURI* \r\n{\r\n   $root/descendant-or-self::*/(.|@*)/namespace-uri(.)=> distinct-values()\r\n};\r\n\r\ndeclare function local:path($node)\r\nas xs:string{\r\n\r\n$node/ancestor-or-self::*\r\n[contains(name(.),\":\")]\r\n!name(.)\r\n=>string-join(\"/\")\r\n \r\n};\r\n\r\n"},{"kind":2,"language":"xquery","value":"$DOC"},{"kind":2,"language":"xquery","value":"$DOC=>functx:namespaces-in-use()"},{"kind":1,"language":"markdown","value":"## paths"},{"kind":2,"language":"xquery","value":" $DOC//*!local:path(.)=>distinct-values()"},{"kind":2,"language":"xquery","value":"$DOC//*/name()=>distinct-values()=>sort()"},{"kind":2,"language":"xquery","value":"\r\n$DOC//*/path()=>count()"},{"kind":2,"language":"xquery","value":"in-scope-prefixes($DOC/*)\r\n"},{"kind":2,"language":"xquery","value":"$DOC//fos:function/concat(@prefix,\":\",@name)=>sort()"},{"kind":2,"language":"xquery","value":"let $fns:=$DOC/fos:functions/fos:function\r\nreturn $fns/fos:errors//errorref/concat(@spec,@class,':',@code)\r\n=>distinct-values()\r\n=>sort()"}]}